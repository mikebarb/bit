<h1>Calendar#display</h1>

<div class="positionable" id=comments>
  <p>Test</>
</div>

<table>
  <% @cal.each do |rows| %>
    <tr>
    <% rows.each do |cells| %>
       <% if cells.key?("slotid") then %>
         <td class="cell slot" id=<%= cells["slotid"].to_s %>  >
       <% else %>
         <td class=cell %>
       <% end %> 
       <% if cells.key?("values") then %>       
         <% if cells["values"].respond_to?(:each) then %>
           <% cells["values"].each do |entry| %>
             <div class=lesson id=<%= entry.lessonid.to_s %> >
               <br>
               <div class=tutor id=<%= entry.tutorid.to_s %> >
                 tutor: <%= entry.tutorpname %>
               </div>
               <% logger.debug "display (cells)- " + cells.inspect %>
               <% if cells.key?("students") then %>
                 <% if cells["students"].respond_to?(:each) then %>
                   <% cells["students"].each do |student| %>
                     <% logger.debug "display (student)- " + student.inspect %>
                     <% if student then %>
                       <div class=student id=<%= student[1].to_s %> >
                         student: <%= student[2] %>
                       </div>
                     <% end %>
                   <% end %>
                 <% end %>
               <% end %>
             </div>
           <% end %>
         <% end %>
       <% elsif cells.key?("value") then %>     
         <%= cells["value"].to_s %>
       <% end %>
       </td>
    <% end %>
    </tr>
  <% end %>
</table>
